<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>variable_reference_table</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */
  vertical-align: middle;
}
</style>


<script src="variable_reference_table_files/libs/clipboard/clipboard.min.js"></script>
<script src="variable_reference_table_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="variable_reference_table_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="variable_reference_table_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="variable_reference_table_files/libs/quarto-html/popper.min.js"></script>
<script src="variable_reference_table_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="variable_reference_table_files/libs/quarto-html/anchor.min.js"></script>
<link href="variable_reference_table_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="variable_reference_table_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="variable_reference_table_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="variable_reference_table_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="variable_reference_table_files/libs/bootstrap/bootstrap-f9c5fa6924831d37e97daa908db0aa7a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="variable-reference-table" class="level1">
<h1>Variable Reference Table</h1>
<section id="pipeline-economics" class="level2">
<h2 class="anchored" data-anchor-id="pipeline-economics">Pipeline Economics</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 33%">
<col style="width: 13%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>YAML Name</th>
<th>Display Label</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>pipe_value_per_user</code></td>
<td>Pipeline replacement cost</td>
<td>float</td>
<td>Pipeline replacement cost per NPA household</td>
</tr>
<tr class="even">
<td><code>pipeline_depreciation_lifetime</code></td>
<td>Pipeline depreciation</td>
<td>int</td>
<td>Number of years over which pipeline assets are depreciated for accounting purposes</td>
</tr>
<tr class="odd">
<td><code>pipeline_maintenance_cost_pct</code></td>
<td>Maintenance cost (%)</td>
<td>float</td>
<td>Annual maintenance costs as a percentage of total pipeline value</td>
</tr>
</tbody>
</table>
</section>
<section id="npa-program" class="level2">
<h2 class="anchored" data-anchor-id="npa-program">NPA Program</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 33%">
<col style="width: 13%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>YAML Name</th>
<th>Display Label</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>npa_install_costs_init</code></td>
<td>NPA cost per household</td>
<td>float</td>
<td>Initial cost per household to install NPA equipment (excluding any incentive programs). Cost will grow annually by the cost inflation rate.</td>
</tr>
<tr class="even">
<td><code>npa_projects_per_year</code></td>
<td>NPA projects per year</td>
<td>int</td>
<td>Number of NPA projects completed annually</td>
</tr>
<tr class="odd">
<td><code>num_converts_per_project</code></td>
<td>Conversions per project</td>
<td>int</td>
<td>Number of household conversions included in each NPA project</td>
</tr>
<tr class="even">
<td><code>npa_year_start</code></td>
<td>NPA start year</td>
<td>int</td>
<td>Year NPA projects start</td>
</tr>
<tr class="odd">
<td><code>npa_year_end</code></td>
<td>NPA end year</td>
<td>int</td>
<td>Year NPA projects end. After the year, the model assumes no more NPA projects are completed.</td>
</tr>
<tr class="even">
<td><code>npa_lifetime</code></td>
<td>NPA lifetime (years)</td>
<td>int</td>
<td>Expected operational lifetime of NPA equipment</td>
</tr>
<tr class="odd">
<td><code>hp_efficiency</code></td>
<td>HP efficiency</td>
<td>int</td>
<td>Heat pump coefficient of performance (COP) - units of heat per unit of electricity. Used to estimate additional electric demand after conversion</td>
</tr>
<tr class="even">
<td><code>water_heater_efficiency</code></td>
<td>Water heater efficiency</td>
<td>int</td>
<td>Water heater efficiency - units of heat per unit of electricity. Used to estimate additional electric demand after conversion</td>
</tr>
<tr class="odd">
<td><code>aircon_percent_adoption_pre_npa</code></td>
<td>Aircon percent adoption pre-NPA</td>
<td>float</td>
<td>Percentage of households that already have air conditioning before NPA</td>
</tr>
<tr class="even">
<td><code>peak_kw_summer_headroom</code></td>
<td>Summer peak headroom (kW)</td>
<td>float</td>
<td>Peak headroom in summer for the grid feeding these households</td>
</tr>
<tr class="odd">
<td><code>peak_kw_winter_headroom</code></td>
<td>Winter peak headroom (kW)</td>
<td>float</td>
<td>Peak headroom in winter for the grid feeding these households</td>
</tr>
</tbody>
</table>
</section>
<section id="electric-utility" class="level2">
<h2 class="anchored" data-anchor-id="electric-utility">Electric Utility</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 33%">
<col style="width: 13%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>YAML Name</th>
<th>Display Label</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>electric_num_users_init</code></td>
<td>Number of users</td>
<td>float</td>
<td>Initial number of customers served by electric utility</td>
</tr>
<tr class="even">
<td><code>scattershot_electrification_users_per_year</code></td>
<td>Scattershot electrification users per year</td>
<td>int</td>
<td>Number of customers who electrified each year, independent of NPAs. This increases overall electric demand and reduces the number of gas customers but has no impact on NPAs or grid upgrades. It is held constant in the BAU scenario.</td>
</tr>
<tr class="odd">
<td><code>baseline_non_npa_ratebase_growth</code></td>
<td>Baseline non-NPA ratebase growth</td>
<td>float</td>
<td>Annual growth rate of utility ratebase excluding NPA investments</td>
</tr>
<tr class="even">
<td><code>electric_default_depreciation_lifetime</code></td>
<td>Electric default depreciation lifetime</td>
<td>int</td>
<td>Default number of years over which electric utility assets are depreciated (excluding NPAs). Used to estimate depreciation for synthetic initial capex projects that would result in the initial ratebase.</td>
</tr>
<tr class="odd">
<td><code>electric_maintenance_cost_pct</code></td>
<td>Electric maintenance cost (%)</td>
<td>float</td>
<td>Annual maintenance costs as percentage of electric utility ratebase (excluding NPAs)</td>
</tr>
<tr class="even">
<td><code>electricity_generation_cost_per_kwh_init</code></td>
<td>Electricity generation cost per kWh</td>
<td>float</td>
<td>Cost per kilowatt-hour of electricity generation in the initial year. This cost will grow annually by the cost inflation rate.</td>
</tr>
<tr class="odd">
<td><code>electric_ratebase_init</code></td>
<td>Electric ratebase</td>
<td>float</td>
<td>Initial value of electric utility’s ratebase (total assets)</td>
</tr>
<tr class="even">
<td><code>electric_ror</code></td>
<td>Rate of return (%)</td>
<td>float</td>
<td>Total rate of return, which is a combination of return on capital and return on debt for electric utility investments (after taxes)</td>
</tr>
<tr class="odd">
<td><code>electric_fixed_overhead_costs</code></td>
<td>Electric fixed overhead costs</td>
<td>float</td>
<td>Fixed annual overhead costs for electric utility</td>
</tr>
<tr class="even">
<td><code>electric_user_bill_fixed_charge</code></td>
<td>Customer bill annual fixed charge (dollars)</td>
<td>int</td>
<td>Annual fixed charge per customer (dollars)</td>
</tr>
<tr class="odd">
<td><code>grid_upgrade_depreciation_lifetime</code></td>
<td>Grid upgrade depreciation lifetime</td>
<td>int</td>
<td>Depreciation lifetime for grid infrastructure upgrades</td>
</tr>
<tr class="even">
<td><code>per_user_electric_need_kwh</code></td>
<td>Per user electric need (kWh)</td>
<td>float</td>
<td>Average annual electricity consumption per customer in kilowatt-hours</td>
</tr>
<tr class="odd">
<td><code>aircon_peak_kw</code></td>
<td>Aircon peak kW</td>
<td>float</td>
<td>Peak energy consumption of a household’s new air conditioning unit. Used to estimate additional summer electric demand for converters without AC prior to NPA.</td>
</tr>
<tr class="even">
<td><code>hp_peak_kw</code></td>
<td>Heat pump peak kW</td>
<td>float</td>
<td>Maximum electrical demand of new heat pump during peak operation</td>
</tr>
<tr class="odd">
<td><code>distribution_cost_per_peak_kw_increase_init</code></td>
<td>Distribution cost per peak kW increase</td>
<td>float</td>
<td>Cost to increase grid capacity by one kilowatt of peak demand. This cost will grow annually by the cost inflation rate.</td>
</tr>
</tbody>
</table>
</section>
<section id="gas-utility" class="level2">
<h2 class="anchored" data-anchor-id="gas-utility">Gas Utility</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 33%">
<col style="width: 13%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>YAML Name</th>
<th>Display Label</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>gas_num_users_init</code></td>
<td>Number of users</td>
<td>float</td>
<td>Initial number of customers served by gas utility</td>
</tr>
<tr class="even">
<td><code>gas_ratebase_init</code></td>
<td>Gas ratebase</td>
<td>float</td>
<td>Initial value of gas utility’s ratebase (total assets)</td>
</tr>
<tr class="odd">
<td><code>gas_ror</code></td>
<td>Rate of return (%)</td>
<td>float</td>
<td>Total rate of return, which is a combination of return on capital and return on debt for gas utility investments (after taxes)</td>
</tr>
<tr class="even">
<td><code>gas_fixed_overhead_costs</code></td>
<td>Gas fixed overhead costs</td>
<td>float</td>
<td>Fixed annual overhead costs for gas utility. These costs will grow annually by the cost inflation rate.</td>
</tr>
<tr class="odd">
<td><code>gas_bau_lpp_costs_per_year</code></td>
<td>Gas BAU pipeline replacement costs per year</td>
<td>float</td>
<td>Gas pipeline replacement costs per year without any NPA projects (BAU). These costs will grow annually by the cost inflation rate.</td>
</tr>
<tr class="even">
<td><code>baseline_non_lpp_ratebase_growth</code></td>
<td>Baseline non-LPP ratebase growth</td>
<td>float</td>
<td>Annual growth rate of gas utility ratebase excluding pipeline replacements</td>
</tr>
<tr class="odd">
<td><code>non_lpp_depreciation_lifetime</code></td>
<td>Non-pipeline depreciation lifetime</td>
<td>int</td>
<td>Depreciation lifetime for non-pipeline gas utility assets</td>
</tr>
<tr class="even">
<td><code>gas_user_bill_fixed_charge</code></td>
<td>Customer bill annual fixed charge (dollars)</td>
<td>int</td>
<td>Annual fixed charge per customer (dollars)</td>
</tr>
<tr class="odd">
<td><code>gas_generation_cost_per_therm_init</code></td>
<td>Gas generation cost per therm</td>
<td>int</td>
<td>Cost per therm of natural gas in the initial year. These costs will grow annually by the cost inflation rate.</td>
</tr>
<tr class="even">
<td><code>per_user_heating_need_therms</code></td>
<td>Per user heating need (therms)</td>
<td>float</td>
<td>Average annual heating demand per customer in therms</td>
</tr>
<tr class="odd">
<td><code>per_user_water_heating_need_therms</code></td>
<td>Per user water heating need (therms)</td>
<td>float</td>
<td>Average annual water heating demand per customer in therms</td>
</tr>
</tbody>
</table>
</section>
<section id="financial-parameters" class="level2">
<h2 class="anchored" data-anchor-id="financial-parameters">Financial Parameters</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 33%">
<col style="width: 13%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>YAML Name</th>
<th>Display Label</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>cost_inflation_rate</code></td>
<td>Cost inflation rate (%)</td>
<td>float</td>
<td>Nominal annual growth rate applied to costs and expenses</td>
</tr>
<tr class="even">
<td><code>construction_inflation_rate</code></td>
<td>Construction inflation rate (%)</td>
<td>float</td>
<td>Nominal annual growth rate applied to construction costs</td>
</tr>
<tr class="odd">
<td><code>real_dollar_discount_rate</code></td>
<td>Inflation adjustment rate (%)</td>
<td>float</td>
<td>Rate at which future costs and expenses are discounted to present results in today’s dollars</td>
</tr>
<tr class="even">
<td><code>npv_discount_rate</code></td>
<td>NPV discount rate (%)</td>
<td>float</td>
<td>Real discount rate for calculating net present value of capex projects (used for performance incentive scenario)</td>
</tr>
<tr class="odd">
<td><code>performance_incentive_pct</code></td>
<td>Performance incentive percentage (%)</td>
<td>float</td>
<td>Percentage of savings (avoided LPP spending) on which gas utility receives a performance incentive (used for performance incentive scenario)</td>
</tr>
<tr class="even">
<td><code>incentive_payback_period</code></td>
<td>Incentive payback period (years)</td>
<td>int</td>
<td>Number of years to pay incentives (used for performance incentive scenario)</td>
</tr>
</tbody>
</table>
</section>
<section id="shared-parameters" class="level2">
<h2 class="anchored" data-anchor-id="shared-parameters">Shared Parameters</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>YAML Name</th>
<th>Display Label</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>start_year</code></td>
<td>Start year</td>
<td>int</td>
<td>First year of the analysis period</td>
</tr>
<tr class="even">
<td><code>end_year</code></td>
<td>End year</td>
<td>int</td>
<td>Last year of the analysis period</td>
</tr>
</tbody>
</table>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button,
          { trigger: "manual",
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined;
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              }
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            }
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>
